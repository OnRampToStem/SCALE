<!DOCTYPE html>
<html>
<head>
	
	<meta charset="UTF-8" />
	<link REL="SHORTCUT ICON" HREF="img/favicon.ico">
	<title>S C A L E</title>
	<script src="lib/jquery.min.js"></script>
	<script src="lib/jquery-ui.min.js"></script>
	<script src="app.js"></script>
	<script src="doc.js"></script>
	<script src="content.js"></script>
	<script src="navigation.js"></script>
<!-- <script src="mw-es5.js"></script> -->
	<link rel="stylesheet" href="css/jquery-ui.min.css"></link>
	<style type="text/css">
		 body { 			font-family:Verdana,Geneva,sans-serif;font-size:12px;
							padding:0px;margin:0px;background-image:url("img/texture.png");
							}
		.wm-header { 		background-color: #bbb;width:calc(100% -32px);color:#fff;
							padding:8px 16px 8px 16px;margin-bottom:8px;
							}
		.wm-lessonTitle { 	font-size: 32px; font-weight: bold; margin-right:32px;
							}
		.wm-topicTitle { 	font-size: 24px ;margin-right:32px;
							}
		.wm-conceptTitle { 	font-size: 16px ;margin-right:32px;
							}
		.wm-StepTitle { 	font-size: 12px; 
							}
		.wm-content { 		height:600px;max-width:1024px;  margin: 0 auto;
							border: 1px solid #ccc;background-color: #eee;padding:8px;
							border-radius: 16px; box-shadow: 2px 4px 8px #999;
							}
		.wm-nextBut { 		position: absolute;left:calc(50% - 40px); border-radius: 128px;
							box-shadow: 2px 4px 8px #999; cursor:pointer; width: 64px;
							}
		.wm-navigation { 	position: absolute; height:80px;;
							}
		.wm-topicBar { 		width:calc(100% -32px); height:3px; border-radius:4px; margin:16px;
							background-color: #999;
							}
		.wm-topicDot { 		width:14px; height:14px; border-radius:16px; margin-left:100px;
							background-color: #009900; border:1px solid #999; cursor:pointer;
							}
		.wm-topicDot:hover 	{border:1px solid #6699ff;
							}
		.wm-topicDotLab { 	width:200px; text-align:center; padding-left:-100px;padding-bottom: 4px;
							text-shadow: 1px 1px #fff;font-weight: bold; color:#333;
							}
		.wm-conceptBar { 	position: absolute; height:16px;background-color: #ccc;
							background-color: 999; border:1px solid #999; cursor:pointer;
							}
		.wm-conceptBar:hover {border:1px solid #6699ff;
							}
		.wm-stepLab	 { 		position: absolute; text-align:center;
							text-shadow: 1px 1px #fff; color:#006600;
							}
		.wm-triangle { 		position: absolute; width: 0;  height: 0;   border-left: 5px solid transparent;  border-right: 5px solid transparent;
   							border-bottom: 5px solid #009900;
							}
		.wm-userName { 		font-size: 12px; cursor:pointer;color:#000;text-align: right;
							}
		.wm-pullDown {		position:absolute;background-color:#fff;width:170px; 
							padding:8px 16px 8px 8px; border:1px solid #999;
							}
		.wm-pullDownItem { 	padding:3px;
						}
		.wm-pullDownItem:hover{ background-color:#eee;
						}
		.ui-dialog-buttonpane.ui-widget-content.ui-helper-clearfix { border:none }
		.ui-dialog { border-radius:12px;box-shadow:2px 2px 6px #ccc }
		.ui-button { border-radius:30px;outline:none }
		.ui-dialog-titlebar { display:none }
		 table {			border-spacing: 0px;  }
	</style>
</head>
<body>
	<div id="headerDiv" class="wm-header">
		<table style='width:100%;vertical-align: top;'><tr>
			<td width="100%"style='vertical-align: middle'><span id='lessonTitle' class='wm-lessonTitle'>Lesson</span>
			<td id='stepDiv' class='wm-step'><span id='userName' class='wm-userName'>User&nbsp;Name</span></td>
		</tr></table>
	</div>
	<div style='text-align:center'>
		<div id="contentDiv" class="wm-content"></div>
		<div id="navDiv" class="wm-navigation"></div>
	</div>

<script>

//////////////////////////////////////////////////////////////////////////////////////////////////
// MAIN 
/////////////////////////////////////////////////////////////////////////////////////////////////

var app=null;

$(window).resize(function() {                                         	// ON WINDOW RESIZE
	if (app)																// If app loaded
		app.Draw("resize");													// Redraw to fit screen
	});
			
$(document).ready(function() {								           	// ON PAGE LOADED
	var url=window.location.search.substring(1);						   	// Get query string
	app=new App();                                                      	// Alloc app
    });									
		

			
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// HELPERS
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	function DialogBox(title, content, width, callback, callback2) 			// DIALOG BOX
	{
		$("#dialogDiv").remove();												
		$("body").append("<div class='unselectable' id='dialogDiv'></div>");														
		var str="<p><img src='img/logo32.png' style='vertical-align:-10px'/>&nbsp;&nbsp;";								
		str+="<span id='gtBoxTi'style='font-size:18px;text-shadow:1px 1px #ccc;color:#666'><b>"+title+"</b></span><p>";
		str+="<div style='font-size:14px;margin:14px'>"+content+"</div>";
		$("#dialogDiv").append(str);	
		$("#dialogDiv").dialog({ width:Math.abs(width), buttons: {
					            	"OK": 		function() { if (callback)
					            								callback(); 
					            								$(this).remove();  
					            								},
					            	"Cancel":  	function() { if (callback2)	            		
					            								callback2();
					            								$(this).remove(); }
									}});	
		if (width < 0)
			$("#dialogDiv").dialog("option","position",{ my:"left top", at:"left top", of:this.parent });
		else
			$("#dialogDiv").dialog("option","position",{ my:"center", at:"center", of:this.parent });
	}


	function trace(msg, p1, p2, p3, p4)										// CONSOLE 
	{
		if (p4 != undefined)
			console.log(msg,p1,p2,p3,p4);
		else if (p3 != undefined)
			console.log(msg,p1,p2,p3);
		else if (p2 != undefined)
			console.log(msg,p1,p2);
		else if (p1 != undefined)
			console.log(msg,p1);
		else
			console.log(msg);
	}

	function Sound(sound, mute)												// PLAY SOUND
	{
		var snd=new Audio();													// Init audio object
		if (!snd.canPlayType("audio/mpeg") || (snd.canPlayType("audio/mpeg") == "maybe")) 
			snd=new Audio("img/"+sound+".ogg");									// Use ogg
		else	
			snd=new Audio("img/"+sound+".mp3");									// Use mp3
		if (!mute)	{															// If not initing or muting	
			snd.volume=50/100;											// Set volume
			snd.play();															// Play it
			}
		}
		
	
	function ButtonPress(id)												// WIGGLE BUTTON
	{
		Sound("click");
		var p=$("#"+id).position();
		$("#"+id).animate( { left: p.left+1+"px", top: p.top+3+"px"}, 50, 
			function() {$("#"+id).css( { left: p.left+"px", top: p.top+"px"})} 
			);
	}

</script>
</body>
</html>
